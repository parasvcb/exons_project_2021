previously was writing to django, now mysql, installing connector to mysql is a major challenge in centos/oracle machines 

### Installation of Database

#### in machine menten
partial docker installation has to be removed, also from sources.list

```console
1081  sudo apt-get purge -y docker-engine docker containerd.io docker.io docker-ce docker-ce-cli docker-compose-plugin
1082  sudo apt-get autoremove -y --purge docker-engine docker docker.io docker-ce docker-compose-plugin
1083  sudo rm -rf /var/lib/docker /etc/docker
1084  sudo rm /etc/apparmor.d/docker
1085  sudo groupdel docker
1086  sudo rm -rf /var/run/docker.sock
1089  sudo rm /etc/apt/sources.list.d/docker.list
1091  sudo vi /etc/apt/sources.list
1092  sudo apt update
1093  sudo apt upgrade
1094  sudo apt autoremove
1095  sudo systemctl status mysql
1096  sudo systemctl status mariadb
1097  sudo apt install mysql-server
1098  sudo systemctl status mysql
1102  sudo mysql_secure_installation
1103  history | tail -100
ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password by '*******';
```

#### in machine centos/oracle9: x64arm
```console
1004  mariadb
1005  mysql
1006  sudo yum install mariadb-server
1007  mysql
1008  sudo systemctl start mariadb.service
1009  mysql
1010  sudo mysql
1011  sudo mysql_secure_installation
1012  mysql
1013  sudo mysql
sudo mysql -u root -p
Enter password: 
mysql> create database ****;
Query OK, 1 row affected (0.22 sec)
mysql> 
conda install -c anaconda mysql-python 
```


#### updating mysql on oracle system (mysql connector failed)
```console
[paras@newJensen ~]$ sudo rm -rf /var/lib/mysql
[paras@newJensen ~]$ ls /var/lib/mysql
[paras@newJensen ~]$ sudo yum autoremove
  Last metadata expiration check: 0:30:36 ago on Fri 07 Oct 2022 12:48:21 PM IST.
  Dependencies resolved.
  Nothing to do.
  Complete!
[paras@newJensen ~]$ sudo yum install ~/Downloads/mysql80-community-release-el9-1.noarch.rpm
  Package mysql80-community-release-el9-1.noarch is already installed.
  Dependencies resolved.
  Nothing to do.
  Complete!
[paras@newJensen ~]$  yum repolist all | grep mysql
  Failed to store expired repos cache: [Errno 13] Permission denied: '/var/cache/yum/expired_repos.json'
  mysql-cluster-8.0-community              MySQL Cluster 8.0 Community    disabled
  mysql-cluster-8.0-community-debuginfo    MySQL Cluster 8.0 Community -  disabled
  mysql-cluster-8.0-community-source       MySQL Cluster 8.0 Community -  disabled
  mysql-connectors-community               MySQL Connectors Community     enabled
  mysql-connectors-community-debuginfo     MySQL Connectors Community - D disabled
  mysql-connectors-community-source        MySQL Connectors Community - S disabled
  mysql-tools-community                    MySQL Tools Community          enabled
  mysql-tools-community-debuginfo          MySQL Tools Community - Debugi disabled
  mysql-tools-community-source             MySQL Tools Community - Source disabled
  mysql80-community                        MySQL 8.0 Community Server     enabled
  mysql80-community-debuginfo              MySQL 8.0 Community Server - D disabled
  mysql80-community-source                 MySQL 8.0 Community Server - S disabled

[paras@newJensen ~]$ sudo yum install mysql-community-server
  Last metadata expiration check: 0:43:03 ago on Fri 07 Oct 2022 12:48:21 PM IST.
  Dependencies resolved.
  ==================================================================================================================
  Package                                 Architecture    Version                 Repository                  Size
  ==================================================================================================================
  Installing:
  mysql-community-server                  x86_64          8.0.30-1.el9            mysql80-community           48 M
  Installing dependencies:
  mysql-community-client                  x86_64          8.0.30-1.el9            mysql80-community          3.7 M
  mysql-community-client-plugins          x86_64          8.0.30-1.el9            mysql80-community          1.4 M
  mysql-community-common                  x86_64          8.0.30-1.el9            mysql80-community          534 k
  mysql-community-icu-data-files          x86_64          8.0.30-1.el9            mysql80-community          2.2 M
  mysql-community-libs                    x86_64          8.0.30-1.el9            mysql80-community          1.5 M

  Transaction Summary
  ==================================================================================================================
  Install  6 Packages

  Total download size: 57 M
  Installed size: 331 M
  Is this ok [y/N]: y
  Downloading Packages:
  (1/6): mysql-community-common-8.0.30-1.el9.x86_64.rpm                             9.1 MB/s | 534 kB     00:00    
  (2/6): mysql-community-client-plugins-8.0.30-1.el9.x86_64.rpm                      13 MB/s | 1.4 MB     00:00    
  (3/6): mysql-community-client-8.0.30-1.el9.x86_64.rpm                              20 MB/s | 3.7 MB     00:00    
  (4/6): mysql-community-icu-data-files-8.0.30-1.el9.x86_64.rpm                      13 MB/s | 2.2 MB     00:00    
  (5/6): mysql-community-libs-8.0.30-1.el9.x86_64.rpm                               9.7 MB/s | 1.5 MB     00:00    
  (6/6): mysql-community-server-8.0.30-1.el9.x86_64.rpm                              31 MB/s |  48 MB     00:01    
  ------------------------------------------------------------------------------------------------------------------
  Total                                                                              33 MB/s |  57 MB     00:01     
  Running transaction check
  Transaction check succeeded.
  Running transaction test
  Transaction test succeeded.
  Running transaction
    Preparing        :                                                                                          1/1 
    Installing       : mysql-community-common-8.0.30-1.el9.x86_64                                               1/6 
    Installing       : mysql-community-client-plugins-8.0.30-1.el9.x86_64                                       2/6 
    Installing       : mysql-community-libs-8.0.30-1.el9.x86_64                                                 3/6 
    Running scriptlet: mysql-community-libs-8.0.30-1.el9.x86_64                                                 3/6 
    Installing       : mysql-community-client-8.0.30-1.el9.x86_64                                               4/6 
    Installing       : mysql-community-icu-data-files-8.0.30-1.el9.x86_64                                       5/6 
    Running scriptlet: mysql-community-server-8.0.30-1.el9.x86_64                                               6/6 
    Installing       : mysql-community-server-8.0.30-1.el9.x86_64                                               6/6 
    Running scriptlet: mysql-community-server-8.0.30-1.el9.x86_64                                               6/6 
    Verifying        : mysql-community-client-8.0.30-1.el9.x86_64                                               1/6 
    Verifying        : mysql-community-client-plugins-8.0.30-1.el9.x86_64                                       2/6 
    Verifying        : mysql-community-common-8.0.30-1.el9.x86_64                                               3/6 
    Verifying        : mysql-community-icu-data-files-8.0.30-1.el9.x86_64                                       4/6 
    Verifying        : mysql-community-libs-8.0.30-1.el9.x86_64                                                 5/6 
    Verifying        : mysql-community-server-8.0.30-1.el9.x86_64                                               6/6 

  Installed:
    mysql-community-client-8.0.30-1.el9.x86_64          mysql-community-client-plugins-8.0.30-1.el9.x86_64         
    mysql-community-common-8.0.30-1.el9.x86_64          mysql-community-icu-data-files-8.0.30-1.el9.x86_64         
    mysql-community-libs-8.0.30-1.el9.x86_64            mysql-community-server-8.0.30-1.el9.x86_64                 

  Complete!

[paras@newJensen ~]$ sudo ls /var/lib/mysql* -lath
  /var/lib/mysql:
  total 4.0K
  drwxr-xr-x. 56 root  root  4.0K Oct  7 13:31 ..
  drwxr-x--x.  2 mysql mysql    6 Jul  7 04:34 .

  /var/lib/mysql-files:
  total 4.0K
  drwxr-xr-x. 56 root  root  4.0K Oct  7 13:31 ..
  drwxr-x---.  2 mysql mysql    6 Jul  7 04:34 .

  /var/lib/mysql-keyring:
  total 4.0K
  drwxr-xr-x. 56 root  root  4.0K Oct  7 13:31 ..
  drwxr-x---.  2 mysql mysql    6 Jul  7 04:34 .
  [paras@newJensen ~]$ systemctl status mysqld
  ○ mysqld.service - MySQL Server
      Loaded: loaded (/usr/lib/systemd/system/mysqld.service; enabled; vendor preset: disabled)
      Active: inactive (dead)
        Docs: man:mysqld(8)
              http://dev.mysql.com/doc/refman/en/using-systemd.html

[paras@newJensen ~]$ systemctl start mysqld
[paras@newJensen ~]$ systemctl status mysqld
● mysqld.service - MySQL Server
     Loaded: loaded (/usr/lib/systemd/system/mysqld.service; enabled; vendor preset: disabled)
     Active: active (running) since Fri 2022-10-07 13:33:46 IST; 2s ago
       Docs: man:mysqld(8)
             http://dev.mysql.com/doc/refman/en/using-systemd.html
    Process: 6628 ExecStartPre=/usr/bin/mysqld_pre_systemd (code=exited, status=0/SUCCESS)
   Main PID: 6755 (mysqld)
     Status: "Server is operational"
      Tasks: 39 (limit: 96968)
     Memory: 483.4M
        CPU: 2.561s
     CGroup: /system.slice/mysqld.service
             └─6755 /usr/sbin/mysqld

Oct 07 13:32:47 newJensen systemd[1]: Starting MySQL Server...
Oct 07 13:33:46 newJensen systemd[1]: Started MySQL Server.

ref: https://docs.oracle.com/cd/E17952_01/mysql-8.0-en/linux-installation-yum-repo.html#yum-install-components
```

**removed the mysql installation and make sure to remove /var/lib/mysql otherwise it wont get installed**
this is soo frustrating and depressing, gcc command is getting failed on installation of mysql client, 
why they don't ship it together with mysql installation, :((
updating (actually installing gcc), 

```console
sudo yum install python-devel mysql-devel
gcc -v
sudo yum install python3-dev #this will fail
sudo https_proxy=http://172.16.2.251:3128 pip install mysqlclient
``` 


### reset root passwd (newJensen)
```console
  sudo systemctl stop mysqld
  sudo systemctl set-environment MYSQLD_OPTS="--skip-grant-tables"
  sudo systemctl start mysqld
  mysql -u root
  mysql> ALTER USER 'root'@'localhost' IDENTIFIED BY 'cbg_2022';
  ERROR 1290 (HY000): The MySQL server is running with the --skip-grant-tables option so it cannot execute this statement
  mysql> FLUSH PRIVILEGES;
  Query OK, 0 rows affected (0.04 sec)
  mysql> ALTER USER 'root'@'localhost' IDENTIFIED BY 'cbg_2022';
  ERROR 1819 (HY000): Your password does not satisfy the current policy requirements
  **mysql> ALTER USER 'root'@'localhost' IDENTIFIED BY 'CBGcbg_2022';**
  Query OK, 0 rows affected (0.07 sec)
  mysql> exit
  Bye

  sudo systemctl stop mysqld
  sudo systemctl unset-environment MYSQLD_OPTS
  sudo systemctl start mysqld
  mysql -u root -p 
  Enter password: 
```
**it will work**

#### import and export the db (newJensen)

##### export
mysqldump -u root -p enactdb > enactd.sql

##### import
scp menton:/home/paras/exonsdrive/project/protein_splicing/projectDir/enact* ./
drop database enactdb;
CREATE DATABASE enactdb;
mysql -u root -p enactdb  < enactd.sql


##### running programs
<!-- programs below checks and downloads the set data -->
(py27) paras@menten:~/exonsdrive/project/protein_splicing/projectDir$ python bin/1_constructing_data/object_builder_latest.py outdir/oldSet_human19_orgs_18/9606_args_nossconfidence.txt 
Processing genes |################################| 19730/19730in main program
->Part:13, Section:helix_confidence_processing_done
->Part:14, Section:congratulations, analysis done too
(py27) paras@menten:~/exonsdrive/project/protein_splicing/projectDir$ python bin/1_constructing_data/object_builder_latest.py outdir/oldSet_human19_orgs_18/7955_args_nossconfidence.txt 
Processing aaseq into exons, gene_wise: |################################| 30083/30083
Out of total 48257 variants, 48257 were already written, use freshStart mode 2 for rewrite all
Processing genes |################################| 26088/26088in main program
(py27) paras@menten:~/exonsdrive/project/protein_splicing/projectDir$ python bin/1_constructing_data/object_builder_latest.py outdir/oldSet_human19_orgs_18/6239_args_nossconfidence.txt 
Processing aaseq into exons, gene_wise: |################################| 19465/19465
Out of total 27209 variants, 27209 were already written, use freshStart mode 2 for rewrite all
Processing genes |################################| 19308/19308in main program
(py27) paras@menten:~/exonsdrive/project/protein_splicing/projectDir$ python bin/1_constructing_data/object_builder_latest.py outdir/oldSet_human19_orgs_18/7227_args_nossconfidence.txt 
Processing aaseq into exons, gene_wise: |################################| 9029/9029
Out of total 18643 variants, 18643 were already written, use freshStart mode 2 for rewrite all
Processing genes |################################| 9024/9024in main program


rm outdir/oldSet_human19_orgs_18/objectsToDB/objectsave_7227__noStructure.pick
rm outdir/oldSet_human19_orgs_18/objectsToDB/objectsave_7955__noStructure.pick
rm outdir/oldSet_human19_orgs_18/objectsToDB/objectsave_10090__noStructure.pick
rm outdir/oldSet_human19_orgs_18/objectsToDB/objectsave_9606__noStructure.pick
rm outdir/oldSet_human19_orgs_18/objectsToDB/objectsave_6239__noStructure.pick

(py27) paras@menten:~/exonsdrive/project/protein_splicing/projectDir$ ln -s ~/exonsdrive/project/protein_splicing/projectDir/outdir/oldSet_human19_orgs_18/7227/derived_data/results/objectsave_7227__noStructure.pick outdir/oldSet_human19_orgs_18/objectsToDB/
(py27) paras@menten:~/exonsdrive/project/protein_splicing/projectDir$ ln -s ~/exonsdrive/project/protein_splicing/projectDir/outdir/oldSet_human19_orgs_18/7955/derived_data/results/objectsave_7955__noStructure.pick outdir/oldSet_human19_orgs_18/objectsToDB/
(py27) paras@menten:~/exonsdrive/project/protein_splicing/projectDir$ ln -s ~/exonsdrive/project/protein_splicing/projectDir/outdir/oldSet_human19_orgs_18/10090/derived_data/results/objectsave_10090__noStructure.pick outdir/oldSet_human19_orgs_18/objectsToDB/
(py27) paras@menten:~/exonsdrive/project/protein_splicing/projectDir$ ln -s ~/exonsdrive/project/protein_splicing/projectDir/outdir/oldSet_human19_orgs_18/6239/derived_data/results/objectsave_6239__noStructure.pick outdir/oldSet_human19_orgs_18/objectsToDB/
(py27) paras@menten:~/exonsdrive/project/protein_splicing/projectDir$ ln -s ~/exonsdrive/project/protein_splicing/projectDir/outdir/oldSet_human19_orgs_18/9606_1/derived_data/results/objectsave_9606__noStructure.pick outdir/oldSet_human19_orgs_18/objectsToDB/

paras@menten:~/exonsdrive/project/protein_splicing/projectDir

python bin/creating_figures_python/Fig1_general_stats.py outdir/oldSet_human19_orgs_18/objectsToDB/objectsave_10090__noStructure.pick outdir/oldSet_human19_orgs_18/10090/derived_data/resultscsv/general/
python bin/creating_figures_python/Fig1_general_stats.py outdir/oldSet_human19_orgs_18/objectsToDB/objectsave_9606__noStructure.pick outdir/oldSet_human19_orgs_18/9606_1/derived_data/resultscsv/general/
python bin/creating_figures_python/Fig1_general_stats.py outdir/oldSet_human19_orgs_18/objectsToDB/objectsave_7227__noStructure.pick outdir/oldSet_human19_orgs_18/7227/derived_data/resultscsv/general/
python bin/creating_figures_python/Fig1_general_stats.py outdir/oldSet_human19_orgs_18/objectsToDB/objectsave_7955__noStructure.pick outdir/oldSet_human19_orgs_18/7955/derived_data/resultscsv/general/
python bin/creating_figures_python/Fig1_general_stats.py outdir/oldSet_human19_orgs_18/objectsToDB/objectsave_6239__noStructure.pick outdir/oldSet_human19_orgs_18/6239/derived_data/resultscsv/general/

rsync -av menton:~/exonsdrive/project/protein_splicing/projectDir/outdir/oldSet_human19_orgs_18/6239/derived_data/resultscsv/general/ elegans_general1
rsync -av menton:~/exonsdrive/project/protein_splicing/projectDir/outdir/oldSet_human19_orgs_18/10090/derived_data/resultscsv/general/ mouse_general1
rsync -av menton:~/exonsdrive/project/protein_splicing/projectDir/outdir/oldSet_human19_orgs_18/9606_1/derived_data/resultscsv/general/ human_general1
rsync -av menton:~/exonsdrive/project/protein_splicing/projectDir/outdir/oldSet_human19_orgs_18/7227/derived_data/resultscsv/general/ fly_general1
rsync -av menton:~/exonsdrive/project/protein_splicing/projectDir/outdir/oldSet_human19_orgs_18/7955/derived_data/resultscsv/general/ fish_general1

# conda activate base
python bin/db_analysis/transPerGeneComparison.py outdir/oldSet_human19_orgs_18/db_args_file.sh 2 outdir/oldSet_human19_orgs_18/db_analysis_out2vs2/
python bin/db_analysis/transPerGeneComparison.py outdir/oldSet_human19_orgs_18/db_args_file.sh 4 outdir/oldSet_human19_orgs_18/db_analysis_out4vs4/

Rscript bin/db_analysis/plots.R outdir/oldSet_human19_orgs_18/db_analysis_out2vs2/ outdir/oldSet_human19_orgs_18/db_analysis_out2vs2/
Rscript bin/db_analysis/plots.R outdir/oldSet_human19_orgs_18/db_analysis_out4vs4/ outdir/oldSet_human19_orgs_18/db_analysis_out4vs4/

#sublinks arent working

python bin/2_object_to_database/T1_mysql.py outdir/oldSet_human19_orgs_18/objectsToDB/ ./ >eventsDbPythonOutTemp


<!-- the programs belwo need objects hyperlinked in folder to create the database -->

```console
(py27) paras@menten:~/exonsdrive/project/protein_splicing/projectDir$ python bin/2_object_to_database/T1_mysql.py outdir/oldSet_human19_orgs_18/objectsToDB/ ./
py27) paras@menten:~/exonsdrive/project/protein_splicing/projectDir$ mysqldump -u root -p enactdb > enactdb.sql
Enter password: 
(py27) paras@menten:~/exonsdrive/project/protein_splicing/projectDir$ ls
’.        arguments_9606_0.txt  enactdb.sql             github.sh                    outdir        output      results     temp       testoutput
3lrv.pdb  arguments.txt         general_fig1.R          ncbia_raw_coods.py           outForm1.txt  output.log  Rplots.pdf  test       text
6239.Upd  bin                   General_stats_fig1.log  objextsave_fromresults.pick  outForm.txt   pssm.R      scratch     test.bash  workspace.code-workspace
(py27) paras@menten:~/exonsdrive/project/protein_splicing/projectDir$ ls -lath

[paras@newJensen comp_3_django]$ scp menton:/home/paras/exonsdrive/project/protein_splicing/projectDir/*.sql ./
client_global_hostkeys_private_confirm: server gave bad signature for RSA key 0: error in libcrypto
enactdb.sql                                                   100%  153MB 110.9MB/s   00:01    

[paras@newJensen comp_3_django]$ mysql -u root -p
mysql> drop database enactdb
    -> ;
Query OK, 8 rows affected (2.63 sec)

mysql> create database enactdb;
Query OK, 1 row affected (0.10 sec)

mysql> exit;
Bye
[paras@newJensen comp_3_django]$ mysql -u root -p enactdb  < enactdb.sql
```

### pending tasks

tasks:
divide the former into usable modules and components 
change color scheme to websafecolors

Shall I keep mysql or sqlite 3 ? check the compatabilities

one done, render the response to latest of django

once that laso is done, 

generate all modules, finalize the dataset completely and 

check the incoreect dopmains spans introduced, 
correct disorder regions, (dont show structred but disorederd region only)





geneObcreator(geneob, genepk):
   get name, and replace single comma with double repeated comma (single * 2, not double quoes)
    get geneid
    taxid, taxanamd, then add into the sql header and return the sql to b executed

transcriptObcreator(genePrimaryKey, trancriptObPrimaryKey, transOb, numberOfDomains, numberOfUniqueDomainEntries, hashOfExonIdandTheirprimarykeys):
    get PI bool
    get tId
    exoncount
    swissportID
    exonsIds comma separated string
        replace that with their primary keys, using hashOfExonIdandTheirprimarykeys
    
    iterate the trans.exons:
        if aa:
            get disorder, ssp, # -> commnet mae in code

        quantify UTMRGD events, 


module identification:

iterate the genes:
    iterate the gene exons and assign them the primary key
    iterate the transcripts and assign them the primary key

    call geneObCreator

    disorder seq is improved now it will only show the disordered region (not structred one).






##### start afresh 2022 build
on 27 nov 22, sunday, I am going to start afresh for all the oragnisms


internet connection is soooooo poor that it will make me wait tio doewnalod dfaat ony in 7 days, foegrt the processing
lets move on to the 



(base) paras@menten:~/exonsdrive/project/protein_splicing$ rsync -a --ignore-existing 9606_1/source_data/SSP/ projectDir/outdir/poolDoneHuman_27Nov/
(base) paras@menten:~/exonsdrive/project/protein_splicing$ ls
10090  9606_0               archived_extra     common_pi_repository        evidence            __pdb_pending.lis  scripts.zip
6239   9606_1               Classes_exons.py   deepanshi_2021.py           extra               projectDir         temp
7227   9606_old             Classes_exons.pyc  domAna2021                  extras_2021         raw_files          uniref90
7955   alphafold_human.txt  common_files       efold_common_pi_repository  object_builder1.py  scripts
(base) paras@menten:~/exonsdrive/project/protein_splicing$ rsync -a --ignore-existing 9606_0/source_data/SSP/ projectDir/outdir/poolDoneHuman_27Nov/ --dry-run | wc -l
0
(base) paras@menten:~/exonsdrive/project/protein_splicing$ cd projectDir/
(base) paras@menten:~/exonsdrive/project/protein_splicing/projectDir$ rsync -a --ignore-existing outdir/oldSet_human19_orgs_18/9606_1/source_data/SSP/ outdir/poolDoneHuman_27Nov/ --dry-run | wc -l


# filling up the pool

rsync -a --ignore-existing outdir/oldSet_human19_orgs_18/9606_1/source_data/SSP/ outdir/poolDoneHuman_27Nov/ --dry-run | wc -l
rsync -a --ignore-existing 9606_1/source_data/SSP/ projectDir/outdir/poolDoneHuman_27Nov/
rsync -a --ignore-existing 9606_0/source_data/SSP/ projectDir/outdir/poolDoneHuman_27Nov/ --dry-run | wc -l

(py27) paras@menten:~/exonsdrive/project/protein_splicing$ rsync -a --ignore-existing 10090/source_data/SSP/ projectDir/outdir/poolDone_10090_28Nov22/
(py27) paras@menten:~/exonsdrive/project/protein_splicing$ rsync -a --ignore-existing 7227/source_data/SSP/ projectDir/outdir/poolDone_7227_28Nov22/
(py27) paras@menten:~/exonsdrive/project/protein_splicing$ rsync -a --ignore-existing 7955/source_data/SSP/ projectDir/outdir/poolDone_7955_28Nov22/
(py27) paras@menten:~/exonsdrive/project/protein_splicing$ rsync -a --ignore-existing 6239/source_data/SSP/ projectDir/outdir/poolDone_6239_28Nov22/

# untarru ensembl and merge with refseq in unknown pool

python bin/1_constructing_data/ensemblMultiFastaToSimple.py outdir/latest_5_org_2022_27_nov/ensembl_25_28nov_22/human/nameSequence.gz outdir/latest_5_org_2022_27_nov/ensembl_25_28nov_22/human/protSeq1perfile/
rsync -a ensembl_25_28nov_22/human/protSeq1perfile/ unknownSSpool9606/
rsync -a 9606/source_data/Refseq_protein/ unknownSSpool9606/

python bin/1_constructing_data/ensemblMultiFastaToSimple.py outdir/latest_5_org_2022_27_nov/ensembl_25_28nov_22/mouse/nameSequence.gz outdir/latest_5_org_2022_27_nov/ensembl_25_28nov_22/mouse/protSeq1perfile/
In a ensemble_write_seq Funct()
outdir/latest_5_org_2022_27_nov/ensembl_25_28nov_22/mouse/nameSequence.gz : is a source File
outdir/latest_5_org_2022_27_nov/ensembl_25_28nov_22/mouse/protSeq1perfile/ : is a output Directory
yes
Writing individual fasta files from the source ensemble into outdir/latest_5_org_2022_27_nov/ensembl_25_28nov_22/mouse/protSeq1perfile/
Processing |####################            | 66511/102245
empty sequences were 35734

(py27) paras@menten:~/exonsdrive/project/protein_splicing/projectDir$ python bin/1_constructing_data/ensemblMultiFastaToSimple.py outdir/latest_5_org_2022_27_nov/ensembl_25_28nov_22/fly/nameSequence.gz outdir/latest_5_org_2022_27_nov/ensembl_25_28nov_22/fly/protSeq1perfile/

----> Into module of multifasta_to_fasta

In a ensemble_write_seq Funct()
outdir/latest_5_org_2022_27_nov/ensembl_25_28nov_22/fly/nameSequence.gz : is a source File
outdir/latest_5_org_2022_27_nov/ensembl_25_28nov_22/fly/protSeq1perfile/ : is a output Directory
yes
Writing individual fasta files from the source ensemble into outdir/latest_5_org_2022_27_nov/ensembl_25_28nov_22/fly/protSeq1perfile/
Processing |################################| 30719/30719
empty sequences were 0

python bin/1_constructing_data/ensemblMultiFastaToSimple.py outdir/latest_5_org_2022_27_nov/ensembl_25_28nov_22/fish/nameSequence.gz outdir/latest_5_org_2022_27_nov/ensembl_25_28nov_22/fish/protSeq1perfile/

----> Into module of multifasta_to_fasta

In a ensemble_write_seq Funct()
outdir/latest_5_org_2022_27_nov/ensembl_25_28nov_22/fish/nameSequence.gz : is a source File
outdir/latest_5_org_2022_27_nov/ensembl_25_28nov_22/fish/protSeq1perfile/ : is a output Directory
yes
Writing individual fasta files from the source ensemble into outdir/latest_5_org_2022_27_nov/ensembl_25_28nov_22/fish/protSeq1perfile/
Processing |#############################   | 51919/57263
empty sequences were 5344

(py27) paras@menten:~/exonsdrive/project/protein_splicing/projectDir$ python bin/1_constructing_data/ensemblMultiFastaToSimple.py outdir/latest_5_org_2022_27_nov/ensembl_25_28nov_22/worm/nameSequence.gz outdir/latest_5_org_2022_27_nov/ensembl_25_28nov_22/worm/protSeq1perfile/

----> Into module of multifasta_to_fasta

In a ensemble_write_seq Funct()
outdir/latest_5_org_2022_27_nov/ensembl_25_28nov_22/worm/nameSequence.gz : is a source File
outdir/latest_5_org_2022_27_nov/ensembl_25_28nov_22/worm/protSeq1perfile/ : is a output Directory
yes
Writing individual fasta files from the source ensemble into outdir/latest_5_org_2022_27_nov/ensembl_25_28nov_22/worm/protSeq1perfile/
Processing |############################### | 31865/32524
empty sequences were 659

(py27) paras@menten:~/exonsdrive/project/protein_splicing/projectDir$ cd outdir/latest_5_org_2022_27_nov/
(py27) paras@menten:~/exonsdrive/project/protein_splicing/projectDir/outdir/latest_5_org_2022_27_nov$ rsync -a ensembl_25_28nov_22/mouse/protSeq1perfile/ unknownSSpool10090/
(py27) paras@menten:~/exonsdrive/project/protein_splicing/projectDir/outdir/latest_5_org_2022_27_nov$ rsync -a ensembl_25_28nov_22/fish/protSeq1perfile/ unknownSSpool7955/
(py27) paras@menten:~/exonsdrive/project/protein_splicing/projectDir/outdir/latest_5_org_2022_27_nov$ rsync -a ensembl_25_28nov_22/fly/protSeq1perfile/ unknownSSpool7227/
(py27) paras@menten:~/exonsdrive/project/protein_splicing/projectDir/outdir/latest_5_org_2022_27_nov$ rsync -a ensembl_25_28nov_22/worm/protSeq1perfile/ unknownSSpool6239/
(py27) paras@menten:~/exonsdrive/project/protein_splicing/projectDir/outdir/latest_5_org_2022_27_nov$ 
(py27) paras@menten:~/exonsdrive/project/protein_splicing/projectDir/outdir/latest_5_org_2022_27_nov$ rsync -a 10090/source_data/Refseq_protein/ unknownSSpool10090/
(py27) paras@menten:~/exonsdrive/project/protein_splicing/projectDir/outdir/latest_5_org_2022_27_nov$ rsync -a 6239/source_data/Refseq_protein/ unknownSSpool6239/
(py27) paras@menten:~/exonsdrive/project/protein_splicing/projectDir/outdir/latest_5_org_2022_27_nov$ find unknownSSpool10090/ -name "*.faa" -print0 | xargs -0 rename 's/\.faa//'
(py27) paras@menten:~/exonsdrive/project/protein_splicing/projectDir/outdir/latest_5_org_2022_27_nov$ find unknownSSpool6239/ -name "*.faa" -print0 | xargs -0 rename 's/\.faa//'
(py27) paras@menten:~/exonsdrive/project/protein_splicing/projectDir/outdir/latest_5_org_2022_27_nov$ find unknownSSpool7227/ -name "*.faa" -print0 | xargs -0 rename 's/\.faa//'
(py27) paras@menten:~/exonsdrive/project/protein_splicing/projectDir/outdir/latest_5_org_2022_27_nov$ find unknownSSpool7955/ -name "*.faa" -print0 | xargs -0 rename 's/\.faa//'
(py27) paras@menten:~/exonsdrive/project/protein_splicing/projectDir/outdir/latest_5_org_2022_27_nov$ rsync -a 7227/source_data/Refseq_protein/ unknownSSpool7227/
(py27) paras@menten:~/exonsdrive/project/protein_splicing/projectDir/outdir/latest_5_org_2022_27_nov$ rsync -a 7955/source_data/Refseq_protein/ unknownSSpool7955/




(py27) paras@menten:~/exonsdrive/project/protein_splicing/projectDir/outdir$ find poolDoneHuman_27Nov/ -name "*.dat" -print0 | xargs -0 rm
(py27) paras@menten:~/exonsdrive/project/protein_splicing/projectDir/outdir$ ls poolDoneHuman_27Nov/ | wc -l
131786
(py27) paras@menten:~/exonsdrive/project/protein_splicing/projectDir/outdir$ find poolDoneHuman_27Nov/ -name "*.faa" -print0 | xargs -0 rm
(py27) paras@menten:~/exonsdrive/project/protein_splicing/projectDir/outdir$ ls poolDoneHuman_27Nov/ | wc -l


find poolDoneHuman_27Nov/ -name "*faa.dat.ss" -print0 | xargs -0 rename 's/\.faa.dat.ss/\.dat.ss/'



ensembl parsing:
in nameSequence format, protein is alway listed 3rd, header.split('|')[2]

>ENSG00000003989.18|ENST00000004531.14|ENSP00000004531.10|ENSE00003993812;ENSE00000888733;ENSE00000888729;ENSE00000888732;ENSE00000924832;ENSE00000888730;ENSE00001706824;ENSE00000888731;ENSE00000457144;ENSE00000924833;ENSE00003653138;ENSE00000457145|17538777;17554560;17563603;17558295;17550301;17561944;17564950;17560328;17544451;17551764;17543318;17548678|17538922;17554699;17563711;17558397;17550434;17562110;17570561;17560533;17544606;17551986;17543715;17548843|17538825;17554560;17563603;17558295;17550301;17561944;17564950;17560328;17544451;17551764;17543318;17548678|17538922;17554699;17563711;17558397;17550434;17562110;17565146;17560533;17544606;17551986;17543715;17548843|1;7;11;8;5;10;12;9;3;6;2;4|1|1

>ENSMUSG00000000078.8|ENSMUST00000000080.8|ENSMUSP00000000080|ENSMUSE00000115546;ENSMUSE00000510516;ENSMUSE00000469019;ENSMUSE00000115548|5915343;5911841;5920393;5916761|5914767;5911481;5917231;5916638|1|2;1;4;3|5914767;5911638;5917231;5916638|5915343;5911841;5917282;5916761

>ENSDARG00000000002.8|ENSDART00000000005.7|ENSDARP00000000005.6|ENSDARE00000008041;ENSDARE00000000009;ENSDARE00000084941;ENSDARE00000023808;ENSDARE00000008079;ENSDARE00000444954;ENSDARE00000007932|34099049;34102490;34090811;34102775;34091056;34113209;34107538|34098913;34102339;34089156;34102672;34090900;34112896;34107455|1|3;4;1;5;2;7;6|34098913;34102339;34089156;34102672;34090900;34112896;34107455|34099049;34102490;34090811;34102775;34091056;34113209;34107538|1

>FBgn0031093|FBtr0070026|FBpp0070025|FBtr0070026-E2;FBtr0070026-E1|20168042;20169474|20169416;20169981|-1|2;1|20168151;20169474|20169416;20169845|1

>WBGene00007073|AC3.8.1|AC3.8.1|AC3.8.1.e6;AC3.8.1.e7;AC3.8.1.e1;AC3.8.1.e5;AC3.8.1.e10;AC3.8.1.e2;AC3.8.1.e8;AC3.8.1.e9;AC3.8.1.e4;AC3.8.1.e3;AC3.8.1.e11|10399833;10400016;10398801;10399700;10400769;10399010;10400444;10400635;10399392;10399231;10401045|10399940;10400397;10398962;10399789;10401001;10399078;10400583;10400720;10399434;10399344;10401307|1|6;7;1;5;10;2;8;9;4;3;11|10399833;10400016;10398810;10399700;10400769;10399010;10400444;10400635;10399392;10399231;10401045|10399940;10400397;10398962;10399789;10401001;10399078;10400583;10400720;10399434;10399344;10401222|1



updating ensemble_write_seq() in multifasta_to_fasta for opurpose above

Writing individual fasta files from the source ensemble into outdir/latest_5_org_2022_27_nov/ensembl_25_28nov_22/human/protSeq1perfile/
Processing |##############                  | 121541/274081
empty sequences were 152540
## ensembl human sequqnces

they can only be deleted wuith teh ofllwing optio

find outdir/latest_5_org_2022_27_nov/ensembl_25_28nov_22/human/protSeq1perfile/* -delete


replacong extr faa from proteins


outdir/latest_5_org_2022_27_nov/9606/source_data/SSP
mkdir outdir/latest_5_org_2022_27_nov/9606/source_data/PendingSSP

python bin/1_constructing_data/unassignedProteins.py outdir/latest_5_org_2022_27_nov/unknownSSpool9606/ outdir/poolDoneHuman_27Nov/ outdir/latest_5_org_2022_27_nov/9606/source_data/SSP/ outdir/latest_5_org_2022_27_nov/9606/source_data/PendingSSP outdir/latest_5_org_2022_27_nov/9606/source_data/mapPendingSSP

Total Were 252280 entries (147829 non red)
>3000 Were 748 entries (748 non red)
PreAss Were 162829 entries (71266 non red)
RunSet Were 88573 entries (75815 non red)
(HUman)


(py27) paras@menten:~/exonsdrive/project/protein_splicing/projectDir$ mkdir outdir/latest_5_org_2022_27_nov/10090/source_data/SSP/
(py27) paras@menten:~/exonsdrive/project/protein_splicing/projectDir$ ^C
(py27) paras@menten:~/exonsdrive/project/protein_splicing/projectDir$ mkdir outdir/latest_5_org_2022_27_nov/6239/source_data/SSP/
(py27) paras@menten:~/exonsdrive/project/protein_splicing/projectDir$ mkdir outdir/latest_5_org_2022_27_nov/7955/source_data/SSP/
(py27) paras@menten:~/exonsdrive/project/protein_splicing/projectDir$ mkdir outdir/latest_5_org_2022_27_nov/7227/source_data/SSP/

(py27) paras@menten:~/exonsdrive/project/protein_splicing/projectDir$ mkdir outdir/latest_5_org_2022_27_nov/10090/source_data/PendingSSP
(py27) paras@menten:~/exonsdrive/project/protein_splicing/projectDir$ mkdir outdir/latest_5_org_2022_27_nov/6239/source_data/PendingSSP
(py27) paras@menten:~/exonsdrive/project/protein_splicing/projectDir$ mkdir outdir/latest_5_org_2022_27_nov/7955/source_data/PendingSSP
(py27) paras@menten:~/exonsdrive/project/protein_splicing/projectDir$ mkdir outdir/latest_5_org_2022_27_nov/7227/source_data/PendingSSP

python bin/1_constructing_data/unassignedProteins.py outdir/latest_5_org_2022_27_nov/unknownSSpool10090/ outdir/poolDone_10090_28Nov22/ outdir/latest_5_org_2022_27_nov/10090/source_data/SSP/ outdir/latest_5_org_2022_27_nov/10090/source_data/PendingSSP outdir/latest_5_org_2022_27_nov/10090/source_data/mapPendingSSP
Total Were 158911 entries (93957 non red)
>3000 Were 1170 entries (1170 non red)
PreAss Were 113159 entries (52133 non red)
RunSet Were 44246 entries (40654 non red)

python bin/1_constructing_data/unassignedProteins.py outdir/latest_5_org_2022_27_nov/unknownSSpool7227/ outdir/poolDone_7227_28Nov22/ outdir/latest_5_org_2022_27_nov/7227/source_data/SSP/ outdir/latest_5_org_2022_27_nov/7227/source_data/PendingSSP outdir/latest_5_org_2022_27_nov/7227/source_data/mapPendingSSP
Total Were 61505 entries (22333 non red)
>3000 Were 186 entries (186 non red)
PreAss Were 60093 entries (21629 non red)
RunSet Were 1008 entries (518 non red)

python bin/1_constructing_data/unassignedProteins.py outdir/latest_5_org_2022_27_nov/unknownSSpool7955/ outdir/poolDone_7955_28Nov22/ outdir/latest_5_org_2022_27_nov/7955/source_data/SSP/ outdir/latest_5_org_2022_27_nov/7955/source_data/PendingSSP outdir/latest_5_org_2022_27_nov/7955/source_data/mapPendingSSP
Total Were 100740 entries (73133 non red)
>3000 Were 962 entries (962 non red)
PreAss Were 69025 entries (43422 non red)
RunSet Were 30636 entries (28749 non red)

python bin/1_constructing_data/unassignedProteins.py outdir/latest_5_org_2022_27_nov/unknownSSpool6239/ outdir/poolDone_6239_28Nov22/ outdir/latest_5_org_2022_27_nov/6239/source_data/SSP/ outdir/latest_5_org_2022_27_nov/6239/source_data/PendingSSP outdir/latest_5_org_2022_27_nov/6239/source_data/mapPendingSSP
Total Were 60399 entries (28390 non red)
>3000 Were 220 entries (220 non red)
PreAss Were 56804 entries (26562 non red)
RunSet Were 3153 entries (1608 non red)

process:
1. transfer data from nabi to local system (menton)
2. unpack ensembl, taking care of the empty protein seuqnqces or seuqqces not available
3. keep 1 and 2 in same folder
4. make folder of previously predicted results
5. run unassigned proeins on them and then run Tasser and map the values
6. pfam is pending
7. disordered is pending
  


sequence stats

(base) paras@menten:~/exonsdrive/project/protein_splicing/projectDir/outdir/latest_5_org_2022_27_nov$ ls ensembl_25_28nov_22/mouse/protSeq1perfile/ | wc -l
66511
(base) paras@menten:~/exonsdrive/project/protein_splicing/projectDir/outdir/latest_5_org_2022_27_nov$ ls ensembl_25_28nov_22/fly/protSeq1perfile/ | wc -l
30719
(base) paras@menten:~/exonsdrive/project/protein_splicing/projectDir/outdir/latest_5_org_2022_27_nov$ ls ensembl_25_28nov_22/fish/protSeq1perfile/ | wc -l
51919
(base) paras@menten:~/exonsdrive/project/protein_splicing/projectDir/outdir/latest_5_org_2022_27_nov$ ls ensembl_25_28nov_22/worm/protSeq1perfile/ | wc -l
31865
(base) paras@menten:~/exonsdrive/project/protein_splicing/projectDir/outdir/latest_5_org_2022_27_nov$ ls ensembl_25_28nov_22/human/protSeq1perfile/ | wc -l
121541


(base) paras@menten:~/exonsdrive/project/protein_splicing/projectDir/outdir/latest_5_org_2022_27_nov$ ls 9606/source_data/Refseq_protein/ | wc -l
130739
(base) paras@menten:~/exonsdrive/project/protein_splicing/projectDir/outdir/latest_5_org_2022_27_nov$ ls 10090/source_data/Refseq_protein/ | wc -l
92400
(base) paras@menten:~/exonsdrive/project/protein_splicing/projectDir/outdir/latest_5_org_2022_27_nov$ ls 7227/source_data/Refseq_protein/ | wc -l
30786
(base) paras@menten:~/exonsdrive/project/protein_splicing/projectDir/outdir/latest_5_org_2022_27_nov$ ls 7955/source_data/Refseq_protein/ | wc -l
48821
(base) paras@menten:~/exonsdrive/project/protein_splicing/projectDir/outdir/latest_5_org_2022_27_nov$ ls 6239/source_data/Refseq_protein/ | wc -l
28534

org   ncbi    ensembl
human 130739  121541
mouse 92400 66511
fish  48821 51919
fly 30786 30719
worm  28534 31865



24 april 23
(py27) paras@menten:~/exonsdrive/project/protein_splicing/projectDir/bin/db_analysis$ python onlyAlternateExonsGenes.py ../../outdir/latest_5_org_2022_27_nov/objectsToDB/objectsave_9606__noStructure.pick ../../outdir/latest_5_org_2022_27_nov/9606/derived_data/resultscsv/general/F1_Condition_3000Pilength_2Isf_2ExCount/condition_genes.pick
